name: Aspect Build - Devserver

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build_devserver:
    runs-on: ubuntu-latest 
    
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # ðŸš¨ FIX: Using the commit SHA and '/action' path for the CLI setup.
      # REPLACE <CLI_COMMIT_SHA> with the actual 40-character hash.
      - name: Set up Bazel and Aspect CLI
        uses: aspect-build/aspect-cli/action@<CLI_COMMIT_SHA> 

      - name: Configure Workflows Environment
        run: echo "Configuring environment..."

      # ðŸš¨ FIX: Using the commit SHA and '/action' path for the Workflows action.
      # REPLACE <WORKFLOWS_COMMIT_SHA> with the actual 40-character hash.
      - name: Run Aspect Build for Devserver
        uses: aspect-build/workflows-action/action@<WORKFLOWS_COMMIT_SHA> 
        with:
          task: build 
          workspace: "node_app_gcp"